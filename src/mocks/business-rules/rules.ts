import type { BusinessRule } from '@/types/businessRules';

const now = new Date();

const daysAgo = (days: number) => {
  const date = new Date(now);
  date.setDate(now.getDate() - days);
  return date.toISOString();
};

export const businessRules: BusinessRule[] = [
  // Dados
  {
    ruleId: 'dados-avaliacao-venda',
    moduleId: 'dados',
    title: 'Avaliação de venda',
    description: 'Faixas de avaliação para imóveis à venda',
    category: 'parametros',
    status: 'active',
    valueType: 'json',
    value: { verde: { de: 300000, ate: 1800000 }, neutro: { de: 1800001, ate: 2500000 }, vermelho: { de: 2500001, ate: 5000000 } },
    editable: true,
    updatedAt: daysAgo(2),
    tags: ['avaliacao', 'venda'],
  },
  {
    ruleId: 'dados-marca-dagua',
    moduleId: 'dados',
    title: 'Marca d’água padrão',
    description: 'Ativa marca d’água e posição default',
    category: 'parametros',
    status: 'active',
    valueType: 'boolean',
    value: true,
    editable: true,
    updatedAt: daysAgo(4),
    tags: ['imagem', 'seguranca'],
  },
  {
    ruleId: 'dados-prazos-atendimento',
    moduleId: 'dados',
    title: 'Prazos de atendimento',
    description: 'Prazos mínimos para inserção e retorno',
    category: 'parametros',
    status: 'active',
    valueType: 'json',
    value: { insercao: { de: 1, ate: 7 }, atendimento: { de: 1, ate: 5 } },
    editable: true,
    updatedAt: daysAgo(7),
    tags: ['agenda', 'sla'],
  },
  {
    ruleId: 'dados-pontuacao',
    moduleId: 'dados-pontuacao',
    title: 'Pontuação por etapa',
    description: 'Pesos para captação, visita e fechamento',
    category: 'parametros',
    status: 'active',
    valueType: 'json',
    value: { captacao: 3, visita: 2, fechamento: 5 },
    editable: true,
    updatedAt: daysAgo(1),
    tags: ['pontuacao', 'corretores'],
  },

  // Funil
  {
    ruleId: 'funil-limite-etapas',
    moduleId: 'funil',
    title: 'Limite de etapas',
    description: 'Quantidade máxima de etapas do funil',
    category: 'parametros',
    status: 'active',
    valueType: 'number',
    value: 10,
    editable: true,
    updatedAt: daysAgo(3),
    tags: ['funil', 'limite'],
  },
  {
    ruleId: 'funil-etapas',
    moduleId: 'funil',
    title: 'Ordem das etapas',
    description: 'Sequência oficial do pipeline',
    category: 'parametros',
    status: 'active',
    valueType: 'list',
    value: ['Novo', 'Contato', 'Qualificado', 'Proposta', 'Fechado'],
    editable: true,
    updatedAt: daysAgo(5),
    tags: ['funil', 'pipeline'],
  },
  {
    ruleId: 'funil-preview',
    moduleId: 'funil-regras',
    title: 'Visualização rápida',
    description: 'Mostra preview lateral com cores do funil',
    category: 'parametros',
    status: 'active',
    valueType: 'boolean',
    value: true,
    editable: true,
    updatedAt: daysAgo(6),
    tags: ['preview'],
  },

  // Imóveis
  {
    ruleId: 'imoveis-form-visita',
    moduleId: 'imoveis',
    title: 'Campos obrigatórios de visita',
    description: 'Checklist mínimo para agendar visita',
    category: 'formularios',
    status: 'active',
    valueType: 'list',
    value: ['Data', 'Horário', 'Responsável', 'Observações'],
    editable: true,
    updatedAt: daysAgo(6),
    tags: ['agenda', 'visita'],
  },
  {
    ruleId: 'imoveis-tags',
    moduleId: 'imoveis',
    title: 'Tags de vitrine',
    description: 'Taxonomia para destacar imóveis',
    category: 'tabelas-auxiliares',
    status: 'active',
    valueType: 'list',
    value: ['Premium', 'Oportunidade', 'Exclusivo'],
    editable: true,
    updatedAt: daysAgo(9),
    tags: ['tags', 'vitrine'],
  },

  // Tabelas auxiliares
  {
    ruleId: 'tabelas-tipos-imoveis',
    moduleId: 'tabelas-auxiliares',
    title: 'Tipos de imóveis',
    description: 'Lista oficial para cadastros',
    category: 'tabelas-auxiliares',
    status: 'active',
    valueType: 'list',
    value: ['Apartamento', 'Casa', 'Cobertura', 'Sala comercial'],
    editable: true,
    updatedAt: daysAgo(2),
    tags: ['cadastro', 'lookup'],
  },
  {
    ruleId: 'tabelas-cidades',
    moduleId: 'tabelas-auxiliares',
    title: 'Cidades atendidas',
    description: 'Domínio territorial habilitado',
    category: 'tabelas-auxiliares',
    status: 'active',
    valueType: 'list',
    value: ['São Paulo', 'Campinas', 'Santos'],
    editable: true,
    updatedAt: daysAgo(12),
    tags: ['geo'],
  },

  // Formulários
  {
    ruleId: 'forms-captacao',
    moduleId: 'formularios',
    title: 'Campos obrigatórios',
    description: 'Campos mínimos para publicar formulário',
    category: 'formularios',
    status: 'active',
    valueType: 'list',
    value: ['Título', 'Descrição', 'Canal de origem'],
    editable: true,
    updatedAt: daysAgo(4),
    tags: ['form', 'obrigatorio'],
  },
  {
    ruleId: 'forms-ordem',
    moduleId: 'formularios',
    title: 'Ordem dos campos',
    description: 'Sequência padrão de apresentação',
    category: 'formularios',
    status: 'active',
    valueType: 'list',
    value: ['Contexto', 'Contato', 'Detalhes', 'Confirmar'],
    editable: true,
    updatedAt: daysAgo(8),
    tags: ['form', 'ordem'],
  },

  // Perfis
  {
    ruleId: 'perfis-visibilidade',
    moduleId: 'perfis',
    title: 'Perfis com edição',
    description: 'Perfis autorizados a editar regras',
    category: 'perfis',
    status: 'active',
    valueType: 'list',
    value: ['Administrador', 'Gestor'],
    editable: true,
    updatedAt: daysAgo(3),
    tags: ['perfis', 'seguranca'],
  },

  // Equipes
  {
    ruleId: 'equipes-responsaveis',
    moduleId: 'equipes',
    title: 'Equipes responsáveis',
    description: 'Times que recebem notificações',
    category: 'equipes',
    status: 'active',
    valueType: 'list',
    value: ['Time Imóveis', 'Time Funil'],
    editable: true,
    updatedAt: daysAgo(5),
    tags: ['equipes'],
  },

  // Automações
  {
    ruleId: 'automacoes-status',
    moduleId: 'automacoes',
    title: 'Automações ativas',
    description: 'Fluxos que podem ser pausados',
    category: 'parametros',
    status: 'active',
    valueType: 'json',
    value: { onboarding: true, reenviarEmail: true, desativarUsuario: false },
    editable: true,
    updatedAt: daysAgo(2),
    tags: ['automacao'],
  },

  // Webhooks
  {
    ruleId: 'webhooks-envio',
    moduleId: 'webhooks',
    title: 'Eventos enviados',
    description: 'Checklist de eventos publicados',
    category: 'parametros',
    status: 'active',
    valueType: 'list',
    value: ['lead.criado', 'imovel.publicado', 'conta.atualizada'],
    editable: true,
    updatedAt: daysAgo(6),
    tags: ['webhook', 'api'],
  },
];

export default businessRules;
